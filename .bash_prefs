##################################################
# File:         ~/.bash_aliases
# Created:      2010-08-09
# Modified:     2017-01-28
# Comment:      \alias to override
##################################################
# FIXME aliases w/$1 -> functions
##################################################
 
#=================================================
# Shell Options
# http://www.gnu.org/software/bash/manual/bashref.html#The-Shopt-Builtin
#=================================================
shopt -s autocd
shopt -s cdable_vars
shopt -s cdspell
shopt -s checkwinsize
shopt -s dirspell
shopt -s dotglob
shopt -s extglob
shopt -s gnu_errfmt
shopt -s histappend
shopt -s nocaseglob
shopt -s nullglob

#=================================================
# Variables
#=================================================

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
export HISTSIZE=50000
export HISTFILESIZE=50000
export HISTCONTROL=ignoreboth # ignoredups & ignorespace
export HISTIGNORE="&:ls:bg:fg"
export EDITOR="/usr/bin/vim"
export VISUAL="/usr/bin/vim"
export PAGER="/usr/bin/less"
# export GREP_OPTIONS='--color=auto' # DEPRECATED
export PS2="continue-> "
export PS3="select-> "
export PS4='$0.$LINENO+ '
export INPUTRC="$HOME/.inputrc"
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
export LANGUAGE=en_US.UTF-8
 
# directories
www='/var/www/html'
doku='/var/www/html/dokuwiki'
dls='/home/jeff/Downloads'
docs='/home/jeff/Documents'
pics='/home/jeff/Pictures'
pub='/home/jeff/Public'
tunes='/mnt/jeff/Music'
movies='/mnt/jeff/Movies'
 
# ANSI colors
BLK='\e[0;30m'
BLU='\e[0;34m'
GRN='\e[0;32m'
CYN='\e[0;36m'
RED='\e[0;31m'
PPL='\e[0;35m'
BRN='\e[0;33m'
LTGRY='\e[0;37m'
DKGRY='\e[1;30m'
LTBLU='\e[1;34m'
LTGRN='\e[1;32m'
LTCYN='\e[1;36m'
LTRED='\e[1;31m'
LTPPL='\e[1;35m'
YEL='\e[1;33m'
WHT='\e[1;37m'
NON='\e[0m'
 
# tput colors
# BLK="$(tput setaf 0)"
# RED="$(tput setaf 1)"
# GRN="$(tput setaf 2)"
# YEL="$(tput setaf 3)"
# BLU="$(tput setaf 4)"
# MAG="$(tput setaf 5)"
# CYN="$(tput setaf 6)"
# WHT="$(tput setaf 7)"
# NON="$(tput sgr0)"
 
#=================================================
# Prompt
#=================================================
 
PS_DATM="\D{%F %r}"
 
prompt() {
  if [ "$UID" -eq "0" ];
    then PS1="\n\[$LTRED\]\u\[$WHT\]@\[$LTBLU\]\H\[$WHT\]:\[$LTCYN\]\w \[$YEL\]${PS_DATM}\n\[$LTRED\]#\[$NON\] "
    else PS1="\n\[$LTGRN\]\u\[$WHT\]@\[$LTBLU\]\H\[$WHT\]:\[$LTCYN\]\w \[$YEL\]${PS_DATM}\n\[$LTGRN\]$\[$NON\] "
  fi
}
 
PROMPT_COMMAND="prompt"
 
#=================================================
# Aliases
#=================================================
 
#-------------------------------------------------
# SSH / SCP
# ssh -v -l username -p port ip_address
# scp -p PORT
#-------------------------------------------------
alias taz='ssh -l jeff -p 22 192.168.1.10'
alias pc-nick-wol='wakeonlan 00:13:72:0F:F1:C1'
 
#-------------------------------------------------
# Modified Commands
#-------------------------------------------------
alias cd..='cd ..'
alias datm='date "+[ %F %A %r %Z ]"'
alias hg='history -a;history -n;history | grep'
alias psa='ps auwx'
alias cp='cp -p'
alias man='man -a'
alias cb='cd -' #cd back
alias untar='tar xvzf'
alias ping='ping -c 10'
alias openports='netstat -nape --inet'
alias lm='ls | more'
alias llm='ls -l | more'
alias term='xterm -bg Black -fg Green &'
alias ss='xwd -root | convert xwd:- ~/screenshot.png' # depends imagemagick
alias ws='xwd -frame | convert xwd:- ~/windowshot.png' # depends imagemagick
alias clip='xclip -in -selection c $1' # input to clipboard use xclip
alias clop='xclip -out -selection c $1' # output from clipboard use xclip
# kdelogout ref:http://www.daemonforums.org/showthread.php?t=2916#post21688
# alias kdelogout='qdbus org.kde.ksmserver /KSMServer org.kde.KSMServerInterface.logout 0 0 0'
 
# grep ignore case & color
alias egrep='egrep -i --color=auto'
alias fgrep='fgrep -i --color=auto'
alias grep='grep -i --color=auto'
 
# ls
alias l='ls -CF'
alias la='ls -A'
alias ll='ls -halF'
alias ls='ls --color=auto'
alias lm='ls -alF | more'
 
# nav
alias ..='cd ..'
alias ..2='cd ../..'
alias ..3='cd ../../..'
alias ..4='cd ../../../..'
alias ..5='cd ../../../../..'
 
# sudo -> su
alias su='/usr/bin/sudo -i'
 
# apt
## sudo
# alias upd='sudo apt-get update'
# alias upg='upd && sudo apt-get upgrade'
# alias upgd='upd && sudo apt-get dist-upgrade'
# alias upd='sudo apt update'
# alias upg='sudo apt update && sudo apt upgrade'
# alias upgd='sudo apt update && sudo apt full-upgrade'
# alias pkgcln='sudo dpkg --configure -a && sudo apt install -f && sudo apt autoremove -y && sudo apt autoclean -y && sudo apt clean'
## root
# alias upd='apt-get update'
# alias upg='upd && apt-get upgrade'
# alias upgd='upd && apt-get dist-upgrade'
alias upd='apt update'
alias upg='apt update && apt upgrade'
alias upgd='apt update && apt full-upgrade'
alias pkgcln='dpkg --configure -a && apt install -f && apt autoremove -y && apt autoclean -y && apt clean'
 
# rm interactive
alias rm='rm -i'
 
# diskspace free/used human readable
alias df='df -h'
alias du='du -h'
 
# more is less
alias more='less'
 
# clear screen
alias cls='clear;uname -a;echo;lsb_release -ds;echo;date "+[ %F %A %r %Z ]";echo;fortune;echo'
alias md='mkdir'
alias distro='lsb_release -a'
 
# external ip
alias extip='curl http://ipecho.net/plain'
 
#=================================================
# Unused
#=================================================
 
#-------------------------------------------------
# Solaris
#-------------------------------------------------
# alias md5sum='digest -va md5'
# alias sha1sum='digest -va sha1'
# alias psa='ps -ef'
 
#-------------------------------------------------
# Linux
#-------------------------------------------------
# alias clip='xsel --clipboard < $1' # input to clipboard use xsel
# alias clop='xsel --clipboard > $1' # output from clipboard use xsel
 
#=================================================
# Functions
#=================================================
 
# backup files before editing
bu () { cp $1 ~/.backup/`basename $1`-`date +%Y%m%d%H%M`.backup ; }
 
# search for installed package or list all
lspkgs () { dpkg --get-selections "*$1*" ; }
 
# weather METAR current $1=station (default KHVN)
wx() {
  stn=`echo "$1" | tr "[:lower:]" "[:upper:]"`
  [ -z "$stn" ] && stn="KHVN"
  wget -q -O - "http://weather.noaa.gov/pub/data/observations/metar/decoded/${stn}.TXT"
}
 
# is package installed?
isinst() {
  dpkg -s "$1" 2>&- | grep -q "Status" && echo "$1 installed." || echo "$1 not installed."
}
 
# http://www.geocities.com/h2428/petar/bash_acd.htm
#
# do ". acd_func.sh"
# acd_func 1.0.5, 10-nov-2004
# petar marinov, http:/geocities.com/h2428, this is public domain
cd_func ()
{
local x2 the_new_dir adir index
local -i cnt
if [[ $1 == "--" ]]; then
dirs -v
return 0
fi
the_new_dir=$1
[[ -z $1 ]] && the_new_dir=$HOME
if [[ ${the_new_dir:0:1} == '-' ]]; then
#
# Extract dir N from dirs
index=${the_new_dir:1}
[[ -z $index ]] && index=1
adir=$(dirs +$index)
[[ -z $adir ]] && return 1
the_new_dir=$adir
fi
#
# '~' has to be substituted by ${HOME}
[[ ${the_new_dir:0:1} == '~' ]] && the_new_dir="${HOME}${the_new_dir:1}"
#
# Now change to the new dir and add to the top of the stack
pushd "${the_new_dir}" > /dev/null
[[ $? -ne 0 ]] && return 1
the_new_dir=$(pwd)
#
# Trim down everything beyond 11th entry
popd -n +11 2>/dev/null 1>/dev/null
#
# Remove any other occurence of this dir, skipping the top of the stack
for ((cnt=1; cnt <= 10; cnt++)); do
x2=$(dirs +${cnt} 2>/dev/null)
[[ $? -ne 0 ]] && return 0
[[ ${x2:0:1} == '~' ]] && x2="${HOME}${x2:1}"
if [[ "${x2}" == "${the_new_dir}" ]]; then
popd -n +$cnt 2>/dev/null 1>/dev/null
cnt=cnt-1
fi
done
return 0
}
alias cd=cd_func
